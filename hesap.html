<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HesabÄ±m - Banka YÃ¶netim Sistemi</title>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f7fa;
      min-height: 100vh;
    }

    /* ====== LAYOUT (Sidebar + Main) ====== */
    .app {
      display: flex;
      min-height: 100vh;
    }

    /* ====== SIDEBAR (Ù…Ø«Ù„ Ø§Ù„ØµÙˆØ±Ø©) ====== */
    .sidebar {
      width: 280px;
      background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      padding: 18px 14px;
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      overflow-y: auto;
      border-right: 1px solid rgba(255,255,255,0.08);
    }

    .sb-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      font-size: 16px;
      margin-bottom: 16px;
      opacity: 0.95;
      
    }

    .sb-section {
      margin-top: 10px;
      opacity: 0.9;
      font-size: 13px;
      padding: 8px 10px;
    }

    .sb-item {
      width: 100%;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 10px;
      cursor: pointer;
      border: 0;
      background: transparent;
      color: #fff;
      font-size: 14px;
      text-align: left;
      transition: 0.2s;
    }

    .sb-item:hover {
      background: rgba(255,255,255,0.08);
    }

    .sb-item.active {
      background: rgba(255,255,255,0.12);
    }

    .sb-divider {
      height: 1px;
      background: rgba(255,255,255,0.08);
      margin: 12px 0;
    }

    .sb-user {
      position: absolute;
      left: 14px;
      right: 14px;
      bottom: 14px;
      padding: 12px;
      border-radius: 12px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.08);
    }

    .sb-user .name {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      margin-bottom: 8px;
      font-size: 14px;
      opacity: 0.95;
    }

    .sb-user .mini {
      font-size: 12px;
      opacity: 0.75;
    }

    .sb-user .logout {
      margin-top: 10px;
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.08);
      color: #fff;
      cursor: pointer;
      font-weight: 700;
      transition: 0.2s;
    }

    .sb-user .logout:hover {
      background: rgba(255,255,255,0.14);
    }

    /* ====== MAIN ====== */
    .main {
      margin-left: 280px; /* Ù†ÙØ³ Ø¹Ø±Ø¶ sidebar */
      width: calc(100% - 280px);
      min-height: 100vh;
      
    }

    /* ====== NAVBAR (ÙÙˆÙ‚ Ø§Ù„Ù…Ø­ØªÙˆÙ‰) ====== */
    .navbar {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      font-weight: bold;
    }

    .navbar h1 {
      font-size: 24px;
      font-weight: bold;
    }

    /* ====== CONTENT ====== */
    .container {
      max-width: 1200px;
      margin: 40px auto;
      padding: 0 20px;
    }

    .kart-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
      
    }

    .kart {
      font-weight: bold;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      transition: transform 0.3s;
      border: 1px solid rgba(97, 121, 228, 0.25);
    }

    .kart:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
      
    }

    .bakiye-kart {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .kart-baslik { font-size: 14px; opacity: 0.8; margin-bottom: 10px; }
    .kart-deger { font-size: 36px; font-weight: bold; margin-bottom: 5px; }
    .kart-alt { font-size: 12px; opacity: 0.7; }

    .islem-panel {
      background: white;
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
    }

    .islem-baslik {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 20px;
      color: #333;
    }

    .islem-butonlar {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .islem-btn {
      flex: 1;
      min-width: 150px;
      padding: 15px;
      border: 2px solid #e0e0e0;
      background: white;
      border-radius: 12px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.3s;
      color: #333;
    }
/*Ø¨Ø§Ø±Ø§ ØªØ´ÙŠÙƒ*/
    .islem-btn:hover { border-color: #667eea; color: #667eea; }
    .islem-btn.aktif {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-color: transparent;
    }

    .islem-form { display: none; }
    .islem-form.aktif { display: block;  }

    .form-grup { margin-bottom: 20px; }

    .form-grup label {
      display: block;
      color: #333;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .form-grup input, .form-grup textarea {
      width: 100%;
      padding: 14px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 15px;
      transition: all 0.3s;
    }

    .form-grup input:focus, .form-grup textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .onay-btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .onay-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
    }

    .tehlikeli-btn { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%); }

    .gecmis-tablo {
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
    }

    .tablo { width: 100%; border-collapse: collapse; }

    .tablo th {
      background: #f8f9fa;
      padding: 15px;
      text-align: left;
      font-weight: 600;
      color: #333;
      border-bottom: 2px solid #e0e0e0;
    }

    .tablo td {
      padding: 15px;
      border-bottom: 1px solid #f0f0f0;
      color: #666;
    }

    .tablo tr:hover { background: #f8f9fa; }

    .yatirma { color: #043d29; font-weight: 700; }
    .cekme { color: #520808; font-weight: 700; }

    .mesaj {
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      display: none;
      font-size: 14px;
    }

    .mesaj.basarili {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .mesaj.hata {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }

    .modal.aktif { display: flex; }

    .modal-icerik {
      background: white;
      border-radius: 16px;
      padding: 30px;
      max-width: 400px;
      width: 90%;
    }

    .modal-baslik { font-size: 20px; font-weight: 600; margin-bottom: 15px; color: #333; }
    .modal-metin { color: #666; margin-bottom: 25px; line-height: 1.6; }

    .modal-butonlar { display: flex; gap: 10px; }

    .modal-btn {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .modal-btn.iptal { background: #e0e0e0; color: #333; }
    .modal-btn.onayla { background: #ef4444; color: white; }

    /* ====== RESPONSIVE ====== */
    @media (max-width: 900px) {
      .sidebar { width: 240px; }
      .main { margin-left: 240px; width: calc(100% - 240px); }
    }

    @media (max-width: 768px) {
      .sidebar {
        position: static;
        width: 100%;
        height: auto;
      }
      .sb-user { position: static; margin-top: 12px; }
      .main { margin-left: 0; width: 100%; }
      .navbar { padding: 15px 20px; }
      .kart-grid { grid-template-columns: 1fr; }
      .islem-butonlar { flex-direction: column; }
      .tablo { font-size: 14px; }
    }
    /* ====== Ø§ØºÙ„Ø§Ù‚ ÙˆÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ====== */
/* ====== Sidebar Closed (Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø´ÙŠ) ====== */
.sidebar{
  transition: width 0.35s ease;
}
.sidebar.closed{
  width: 70px;
  padding: 18px 10px;      /* ÙŠÙ‚Ù„Ù„ Ø§Ù„Ù…Ø³Ø§Ø­Ø© */
  overflow: hidden;
}

/* Ø§Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ */
.sidebar.closed .sb-title,
.sidebar.closed .sb-section,
.sidebar.closed .sb-divider,
.sidebar.closed .sb-user,
.sidebar.closed .sb-item:not(.toggle-btn){
  display: none !important;
}

/* Ø²Ø± â˜° ÙŠØ¶Ù„ Ø¸Ø§Ù‡Ø± */
.sidebar .toggle-btn{
  width: 48px;
  height: 48px;
  justify-content: center;
  border-radius: 12px;
  margin: 6px auto 0 auto;
  display: flex;
  align-items: center;
  font-size: 20px;
}

/* main Ù„Ù…Ø§ ØªÙƒÙˆÙ† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù…ØºÙ„Ù‚Ø© */
.main{
  transition: margin-left 0.35s ease, width 0.35s ease;
}
.main.closed{
  margin-left: 70px;
  width: calc(100% - 70px);
}

  </style>
</head>

<body>
  <div class="app">

    <!-- ====== SIDEBAR ====== -->
   <aside class="sidebar closed">
      <div class="sb-title"> Banka YÃ¶netim Sistemi</div>
      <!--Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©-->
      <button class="sb-item toggle-btn" onclick="toggleSidebar()" title="MenÃ¼" type="button">
  â˜°
</button>

      <div class="sb-section">MenÃ¼</div>
      <button class="sb-item active" type="button" onclick="scrollToTop()">
     HesabÄ±m
      </button>

      <button class="sb-item" type="button" onclick="openSettingsFromSidebar()">
         Ayarlar
      </button>

      <div class="sb-divider"></div>

      <!-- User box + Logout -->
      <div class="sb-user">
        <div class="name">
          ğŸ‘¤ <span id="kullaniciAdiSidebar">KullanÄ±cÄ±</span>
        </div>
        <div class="mini">Hesap No: <span id="hesapNoSidebar">â€”</span></div>

        <button class="logout" type="button" onclick="cikisYap()"> Ã‡Ä±kÄ±ÅŸ Yap!</button>
      </div>
    </aside>

    <!-- ====== MAIN ====== -->
    <main class="main closed">
      <div class="navbar">
        <h1>HesablarÄ±m</h1>
        <div style="opacity:0.9;font-weight:700;">
          HoÅŸ Geldininiz  <span id="kullaniciAdiTop">...</span>
        </div>
      </div>

      <div class="container">
        <div class="kart-grid">
          <div class="kart bakiye-kart">
            <div class="kart-baslik">Toplam Bakiye</div>
            <div class="kart-deger" id="toplamBakiye">0 â‚º</div>
            <div class="kart-alt">Hesap No: <span id="hesapNo"></span></div>
          </div>

          <div class="kart">
            <div class="kart-baslik">Toplam YatÄ±rÄ±lan</div>
            <div class="kart-deger yatirma" id="toplamYatirilan">0 â‚º</div>
            <div class="kart-alt">TÃ¼m zamanlar</div>
          </div>

          <div class="kart">
            <div class="kart-baslik">Toplam Ã‡ekilen</div>
            <div class="kart-deger cekme" id="toplamCekilen">0 â‚º</div>
            <div class="kart-alt">TÃ¼m zamanlar</div>
          </div>
        </div>

        <div class="islem-panel">
          <div class="islem-baslik">Ä°ÅŸlemler</div>
          <div id="mesajKutusu" class="mesaj"></div>

          <div class="islem-butonlar">
            <button class="islem-btn aktif" onclick="islemSec(event,'yatirma')">Para YatÄ±r</button>
            <button class="islem-btn" onclick="islemSec(event,'cekme')">Para Ã‡ek</button>
            <button class="islem-btn" onclick="islemSec(event,'transfer')">Para Transferi</button>
            <!-- Ø´Ù„Øª Ø²Ø± Ayarlar Ù…Ù† Ù‡ÙˆÙ† Ù„Ø£Ù†Ù‡ ØµØ§Ø± Ø¨Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
          </div>

          <div id="yatirmaForm" class="islem-form aktif">
            <form onsubmit="paraYatir(event)">
              <div class="form-grup">
                <label>YatÄ±rÄ±lacak Tutar (TL)</label>
                <input type="number" id="yatirmaTutar" required min="10" placeholder="Minimum 10 TL" />
              </div>
              <div class="form-grup">
                <label>AÃ§Ä±klama (Ä°steÄŸe baÄŸlÄ±)</label>
                <input type="text" id="yatirmaAciklama" placeholder="Ã–rn: MaaÅŸ yatÄ±rmasÄ±" />
              </div>
              <button type="submit" class="onay-btn">Para YatÄ±r</button>
            </form>
          </div>

          <div id="cekmeForm" class="islem-form">
            <form onsubmit="paraCek(event)">
              <div class="form-grup">
                <label>Ã‡ekilecek Tutar (TL)</label>
                <input type="number" id="cekmeTutar" required min="10" placeholder="Minimum 10 TL" />
              </div>
              <div class="form-grup">
                <label>AÃ§Ä±klama (Ä°steÄŸe baÄŸlÄ±)</label>
                <input type="text" id="cekmeAciklama" placeholder="Ã–rn: Market alÄ±ÅŸveriÅŸi" />
              </div>
              <button type="submit" class="onay-btn">Para Ã‡ek</button>
            </form>
          </div>
<!--transfer-->
          <div id="transferForm" class="islem-form">
  <form onsubmit="paraTransferi(event)">
    <div class="form-grup">
      <label>AlÄ±cÄ± Hesap No</label>
      <input type="text" id="transferAliciHesapNo" required placeholder="Ã–rn: 100200" />
    </div>

    <div class="form-grup">
      <label>Transfer TutarÄ± (TL)</label>
      <input type="number" id="transferTutar" required min="10" placeholder="Minimum 10 TL" />
    </div>

    <div class="form-grup">
      <label>AÃ§Ä±klama (Ä°steÄŸe baÄŸlÄ±)</label>
      <input type="text" id="transferAciklama" placeholder="Ã–rn: Kira / BorÃ§" />
    </div>

    <button type="submit" class="onay-btn">Para Transferi</button>
  </form>
</div>

          <!-- Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù†ØªÙ Ø³Ù…ÙŠØªÙŠÙ‡ hesapForm ÙˆÙ‡Ùˆ Ø¨Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© "Ayarlar" -->
          <div id="hesapForm" class="islem-form">
            <div class="form-grup">
              <label>Ad Soyad</label>
              <input type="text" id="yeniAdSoyad" placeholder="Yeni adÄ±nÄ±z" />
            </div>
            <div class="form-grup">
              <label>Yeni Åifre</label>
              <input type="password" id="yeniSifre" placeholder="Yeni ÅŸifreniz" />
            </div>
            <button onclick="hesapGuncelle()" class="onay-btn">Bilgileri GÃ¼ncelle</button>
            <br /><br />
            <button onclick="hesapKapatModal()" class="onay-btn tehlikeli-btn">HesabÄ± Kapat</button>
          </div>
        </div>

        <div class="gecmis-tablo">
          <div class="islem-baslik">Ä°ÅŸlem GeÃ§miÅŸi</div>
          <table class="tablo">
            <thead>
              <tr>
                <th>Tarih</th>
                <th>Ä°ÅŸlem Tipi</th>
                <th>Tutar</th>
                <th>AÃ§Ä±klama</th>
                <th>Kalan Bakiye</th>
              </tr>
            </thead>
            <tbody id="islemTablosu"></tbody>
          </table>
        </div>
      </div>
    </main>
  </div>

  <div id="modalKapat" class="modal">
    <div class="modal-icerik">
      <div class="modal-baslik">HesabÄ± Kapat</div>
      <div class="modal-metin">
        HesabÄ±nÄ±zÄ± kalÄ±cÄ± olarak kapatmak istediÄŸinizden emin misiniz?
        Bu iÅŸlem geri alÄ±namaz ve tÃ¼m verileriniz silinecektir.
      </div>
      <div class="modal-butonlar">
        <button class="modal-btn iptal" onclick="modalKapat()">Ä°ptal</button>
        <button class="modal-btn onayla" onclick="hesapKapat()">HesabÄ± Kapat</button>
      </div>
    </div>
  </div>

  <script> //jjjava
    let aktifKullanici = null;

    window.onload = function () {
      const kullaniciStr = localStorage.getItem('aktifKullanici');
      if (!kullaniciStr) {
        window.location.href = 'index.html';
        return;
      }
      aktifKullanici = JSON.parse(kullaniciStr);
      sayfaYukle();
    };

    function sayfaYukle() {
      // Top + Cards
      document.getElementById('kullaniciAdiTop').textContent = aktifKullanici.adSoyad;
      document.getElementById('hesapNo').textContent = aktifKullanici.hesapNo;

      // Sidebar user box
      document.getElementById('kullaniciAdiSidebar').textContent = aktifKullanici.adSoyad;
      document.getElementById('hesapNoSidebar').textContent = aktifKullanici.hesapNo;

      bakiyeGuncelle();
      islemleriGoster();
    }

    function bakiyeGuncelle() {
      const kullanicilar = JSON.parse(localStorage.getItem('kullanicilar') || '[]');
      const guncelKullanici = kullanicilar.find(k => k.id === aktifKullanici.id);

      if (guncelKullanici) {
        aktifKullanici = guncelKullanici;
        localStorage.setItem('aktifKullanici', JSON.stringify(aktifKullanici));

        document.getElementById('toplamBakiye').textContent = aktifKullanici.bakiye.toFixed(2) + ' â‚º';

        let toplamYatirilan = 0;
        let toplamCekilen = 0;

        aktifKullanici.islemler.forEach(islem => {
          if (islem.tip === 'Para YatÄ±rma' || islem.tip === 'Hesap AÃ§Ä±lÄ±ÅŸÄ±') {
            toplamYatirilan += islem.tutar;
          } else if (islem.tip === 'Para Ã‡ekme') {
            toplamCekilen += islem.tutar;
          }
        });

        document.getElementById('toplamYatirilan').textContent = toplamYatirilan.toFixed(2) + ' â‚º';
        document.getElementById('toplamCekilen').textContent = toplamCekilen.toFixed(2) + ' â‚º';
      }
    }

    function islemSec(e, islem) {
      document.querySelectorAll('.islem-btn').forEach(btn => btn.classList.remove('aktif'));
      document.querySelectorAll('.islem-form').forEach(form => form.classList.remove('aktif'));

      if (e && e.target) e.target.classList.add('aktif');
      document.getElementById(islem + 'Form').classList.add('aktif');
      mesajGoster('', '');
    }

    function mesajGoster(mesaj, tip) {
      const mesajKutusu = document.getElementById('mesajKutusu');
      if (mesaj) {
        mesajKutusu.textContent = mesaj;
        mesajKutusu.className = 'mesaj ' + tip;
        mesajKutusu.style.display = 'block';
        setTimeout(() => mesajKutusu.style.display = 'none', 5000);
      } else {
        mesajKutusu.style.display = 'none';
      }
    }

    function paraYatir(event) {
      event.preventDefault();

      const tutar = parseFloat(document.getElementById('yatirmaTutar').value);
      const aciklama = document.getElementById('yatirmaAciklama').value || 'Para yatÄ±rma';

      if (tutar < 10) {
        mesajGoster("Minimum yatÄ±rma tutarÄ± 10 TL'dir!", 'hata');
        return;
      }

      const kullanicilar = JSON.parse(localStorage.getItem('kullanicilar') || '[]');
      const kullaniciIndex = kullanicilar.findIndex(k => k.id === aktifKullanici.id);

      kullanicilar[kullaniciIndex].bakiye += tutar;
      kullanicilar[kullaniciIndex].islemler.push({
        tip: 'Para YatÄ±rma',
        tutar: tutar,
        tarih: new Date().toISOString(),
        aciklama: aciklama
      });

      localStorage.setItem('kullanicilar', JSON.stringify(kullanicilar));
      aktifKullanici = kullanicilar[kullaniciIndex];
      localStorage.setItem('aktifKullanici', JSON.stringify(aktifKullanici));

      bakiyeGuncelle();
      islemleriGoster();

      document.getElementById('yatirmaTutar').value = '';
      document.getElementById('yatirmaAciklama').value = '';

      mesajGoster(`${tutar.toFixed(2)} â‚º baÅŸarÄ±yla yatÄ±rÄ±ldÄ±!`, 'basarili');
    }

    function paraCek(event) {
      event.preventDefault();

      const tutar = parseFloat(document.getElementById('cekmeTutar').value);
      const aciklama = document.getElementById('cekmeAciklama').value || 'Para Ã§ekme';

      if (tutar < 10) {
        mesajGoster("Minimum Ã§ekme tutarÄ± 10 TL'dir!", 'hata');
        return;
      }

      if (tutar > aktifKullanici.bakiye) {
        mesajGoster('Yetersiz bakiye! Mevcut bakiyeniz: ' + aktifKullanici.bakiye.toFixed(2) + ' â‚º', 'hata');
        return;
      }

      const kullanicilar = JSON.parse(localStorage.getItem('kullanicilar') || '[]');
      const kullaniciIndex = kullanicilar.findIndex(k => k.id === aktifKullanici.id);

      kullanicilar[kullaniciIndex].bakiye -= tutar;
      kullanicilar[kullaniciIndex].islemler.push({
        tip: 'Para Ã‡ekme',
        tutar: tutar,
        tarih: new Date().toISOString(),
        aciklama: aciklama
      });

      localStorage.setItem('kullanicilar', JSON.stringify(kullanicilar));
      aktifKullanici = kullanicilar[kullaniciIndex];
      localStorage.setItem('aktifKullanici', JSON.stringify(aktifKullanici));

      bakiyeGuncelle();
      islemleriGoster();

      document.getElementById('cekmeTutar').value = '';
      document.getElementById('cekmeAciklama').value = '';

      mesajGoster(`${tutar.toFixed(2)} â‚º baÅŸarÄ±yla Ã§ekildi!`, 'basarili');
    }

    function hesapGuncelle() {
      const yeniAd = document.getElementById('yeniAdSoyad').value;
      const yeniSifre = document.getElementById('yeniSifre').value;

      if (!yeniAd && !yeniSifre) {
        mesajGoster('GÃ¼ncellenecek bilgi girmediniz!', 'hata');
        return;
      }

      const kullanicilar = JSON.parse(localStorage.getItem('kullanicilar') || '[]');
      const kullaniciIndex = kullanicilar.findIndex(k => k.id === aktifKullanici.id);

      if (yeniAd) kullanicilar[kullaniciIndex].adSoyad = yeniAd;
      if (yeniSifre) kullanicilar[kullaniciIndex].sifre = yeniSifre;

      localStorage.setItem('kullanicilar', JSON.stringify(kullanicilar));
      aktifKullanici = kullanicilar[kullaniciIndex];
      localStorage.setItem('aktifKullanici', JSON.stringify(aktifKullanici));

      sayfaYukle();
      document.getElementById('yeniAdSoyad').value = '';
      document.getElementById('yeniSifre').value = '';
      mesajGoster('Hesap bilgileriniz baÅŸarÄ±yla gÃ¼ncellendi!', 'basarili');
    }

    function hesapKapatModal() {
      document.getElementById('modalKapat').classList.add('aktif');
    }

    function modalKapat() {
      document.getElementById('modalKapat').classList.remove('aktif');
    }

    function hesapKapat() {
      const kullanicilar = JSON.parse(localStorage.getItem('kullanicilar') || '[]');
      const yeniListe = kullanicilar.filter(k => k.id !== aktifKullanici.id);

      localStorage.setItem('kullanicilar', JSON.stringify(yeniListe));
      localStorage.removeItem('aktifKullanici');

      alert('HesabÄ±nÄ±z baÅŸarÄ±yla kapatÄ±ldÄ±. Ana sayfaya yÃ¶nlendiriliyorsunuz.');
      window.location.href = 'index.html';
    }

    function islemleriGoster() {
      const tbody = document.getElementById('islemTablosu');
      tbody.innerHTML = '';

      const islemler = [...aktifKullanici.islemler].reverse();
      let kalanBakiye = aktifKullanici.bakiye;

      for (let i = islemler.length - 1; i >= 0; i--) {
        const islem = islemler[i];
        const tr = document.createElement('tr');

        const tarih = new Date(islem.tarih);
        const tarihStr = tarih.toLocaleDateString('tr-TR') + ' ' +
          tarih.toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' });

       const isCikis = (islem.tip === 'Para Ã‡ekme' || islem.tip === 'Para Transferi (GÃ¶nder)');
const tutarClass = isCikis ? 'cekme' : 'yatirma';   // cekme Ø£Ø­Ù…Ø±, yatirma Ø£Ø®Ø¶Ø±
const tutarPrefix = isCikis ? '-' : '+';


        tr.innerHTML = `
          <td>${tarihStr}</td>
          <td>${islem.tip}</td>
          <td class="${tutarClass}">${tutarPrefix}${islem.tutar.toFixed(2)} â‚º</td>
          <td>${islem.aciklama}</td>
          <td>${kalanBakiye.toFixed(2)} â‚º</td>
        `;
//Ø§Ø¶Ø§ÙØ©
        tbody.appendChild(tr);
if (isCikis) kalanBakiye += islem.tutar;
else kalanBakiye -= islem.tutar;


      }
    }

    function cikisYap() {
      if (confirm('Ã‡Ä±kÄ±ÅŸ yapmak istediÄŸinizden emin misiniz?')) {
        localStorage.removeItem('aktifKullanici');
        window.location.href = 'index.html';
      }
    }

    /* ====== Sidebar actions ====== */
    function openSettingsFromSidebar() {
  window.location.href = 'ayarlar.html';
}


    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    function toggleSidebar() {
  document.querySelector('.sidebar').classList.toggle('closed');
  document.querySelector('.main').classList.toggle('closed');
}
           //eklemeee 
function paraTransferi(event) {
  event.preventDefault();

  const aliciHesapNo = document.getElementById('transferAliciHesapNo').value.trim();
  const tutar = parseFloat(document.getElementById('transferTutar').value);
  const aciklama = document.getElementById('transferAciklama').value.trim() || 'Para transferi';

  if (!aliciHesapNo) {
    mesajGoster('AlÄ±cÄ± hesap numarasÄ± giriniz!', 'hata');
    return;
  }

  if (aliciHesapNo === String(aktifKullanici.hesapNo)) {
    mesajGoster('Kendi hesabÄ±nÄ±za transfer yapamazsÄ±nÄ±z!', 'hata');
    return;
  }

  if (isNaN(tutar) || tutar < 10) {
    mesajGoster("Minimum transfer tutarÄ± 10 TL'dir!", 'hata');
    return;
  }

  if (tutar > aktifKullanici.bakiye) {
    mesajGoster('Yetersiz bakiye! Mevcut bakiyeniz: ' + aktifKullanici.bakiye.toFixed(2) + ' â‚º', 'hata');
    return;
  }

  const kullanicilar = JSON.parse(localStorage.getItem('kullanicilar') || '[]');

  const gonderenIndex = kullanicilar.findIndex(k => k.id === aktifKullanici.id);
  const aliciIndex = kullanicilar.findIndex(k => String(k.hesapNo) === aliciHesapNo);

  if (aliciIndex === -1) {
    mesajGoster('AlÄ±cÄ± hesap bulunamadÄ±!', 'hata');
    return;
  }

  // 1) GÃ¶nderen: bakiyeyi dÃ¼ÅŸ + iÅŸlem ekle
  kullanicilar[gonderenIndex].bakiye -= tutar;
  kullanicilar[gonderenIndex].islemler.push({
    tip: 'Para Transferi (GÃ¶nder)',
    tutar: tutar,
    tarih: new Date().toISOString(),
    aciklama: `AlÄ±cÄ±: ${aliciHesapNo} - ${aciklama}`
  });

  // 2) AlÄ±cÄ±: bakiyeyi artÄ±r + iÅŸlem ekle
  const gonderenHesapNo = String(kullanicilar[gonderenIndex].hesapNo);
  kullanicilar[aliciIndex].bakiye += tutar;
  kullanicilar[aliciIndex].islemler.push({
    tip: 'Para Transferi (Al)',
    tutar: tutar,
    tarih: new Date().toISOString(),
    aciklama: `GÃ¶nderen: ${gonderenHesapNo} - ${aciklama}`
  });

  localStorage.setItem('kullanicilar', JSON.stringify(kullanicilar));

  // aktifKullanici gÃ¼ncelle
  aktifKullanici = kullanicilar[gonderenIndex];
  localStorage.setItem('aktifKullanici', JSON.stringify(aktifKullanici));

  bakiyeGuncelle();
  islemleriGoster();

  // temizle
  document.getElementById('transferAliciHesapNo').value = '';
  document.getElementById('transferTutar').value = '';
  document.getElementById('transferAciklama').value = '';

  mesajGoster(`${tutar.toFixed(2)} â‚º baÅŸarÄ±yla transfer edildi!`, 'basarili');
}


  </script>
</body>
</html>
